!function(n,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("lodash"),require("color"),require("coreUtilsLib")):"function"==typeof define&&define.amd?define(["lodash","color","coreUtilsLib"],r):"object"==typeof exports?exports["skin-utils"]=r(require("lodash"),require("color"),require("coreUtilsLib")):n["skin-utils"]=r(n.lodash,n.color,n.coreUtilsLib)}(this,function(n,r,t){return function(n){var r={};function t(e){if(r[e])return r[e].exports;var i=r[e]={i:e,l:!1,exports:{}};return n[e].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=n,t.c=r,t.d=function(n,r,e){t.o(n,r)||Object.defineProperty(n,r,{enumerable:!0,get:e})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,r){if(1&r&&(n=t(n)),8&r)return n;if(4&r&&"object"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(t.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&r&&"string"!=typeof n)for(var i in n)t.d(e,i,function(r){return n[r]}.bind(null,i));return e},t.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(r,"a",r),r},t.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},t.p="",t(t.s=2)}([function(r,t){r.exports=n},function(n,r,t){"use strict";var e=t(0),i=t(4),u=t(5).checkIsParamAnAliasAndGetUnaliasedValue,o={brightness:function(n,r){return n.value(r*n.hsv().v)},alpha:function(n,r){return n.alpha(r*n.alpha())},decrease:function(n,r){return e.parseInt(n)-e.parseInt(r)},increase:function(n,r){return e.parseInt(n)+e.parseInt(r)},multiply:function(n,r){return e.parseInt(n)*parseFloat(r)},max:function(n,r){return Math.max(e.parseInt(n),e.parseInt(r))},eval:function(n,r,t){return t[r](n)}};function a(n,r,t,e){return t&&t[n]?function(n,r,t){return o[r.type]?o[r.type](n,r.value,t):n}(r,t[n],e):r}function c(n,r,t){var i=e.isUndefined(r[n])?t[n]:r[n];if(!e.isArray(i))return i;if(1===i.length)return r[i[0]]||t[i[0]];var u="";return i=e.reduce(i,function(n,i){var o,a,c=r[i]||t[i];return u=u||(o=c,a=e.parseInt(o).toString(),o=o.toString(),isNaN(a)||o===a?"":o.substr(o.indexOf(a)+a.length)),n+e.parseInt(c)},0),"x"===u&&(u="px"),i+u}n.exports={renderParam:function(n,r,t,f,s){if(!r.params)return"";var l=u(r.params[n]),p=c(n,t,r.paramsDefaults);if(void 0===p||!l)return"";switch(l){case"BG_COLOR":case"COLOR":case"COLOR_ALPHA":p=function(n,r,t,i){var u="alpha-"+(Array.isArray(t[r])&&t[r][0]||r),a=e.isUndefined(i[u])?t[u]:i[u];return e.isUndefined(a)||(n=o.alpha(n,parseFloat(a))),n}(p=function(n,r){var t=n.split("color_");return 2===t.length&&(n=r[e.parseInt(t[1])]),e.includes(n,",")&&!e.includes(n,"rgb")&&(n="rgba("+n+")"),i(n)}(p,f),n,r.paramsDefaults,t);break;case"BORDER_RADIUS":t[n]&&(p=function(n){var r="";return e.forEach(n.replace(/px/g,"").split(" "),function(n){var t=Math.min(e.parseInt(n),99999);r+=" "+t+(0===t?"":"px")}),n=r.substring(1)}(p));break;case"BORDER_SIZES":t[n]&&(p=function(n){if("number"==typeof n)return Math.min(e.parseInt(n),99999)+"px";var r="";return e.forEach(n.replace(/px/g,"").split(" "),function(n){var t=Math.min(e.parseInt(n),99999);r+=" "+t+(0===t?"":"px")}),n=r.substring(1)}(p));break;case"BOX_SHADOW":if(function(n,r,t){var e="boxShadowToggleOn-"+n;return"false"===(r[e]||t[e])}(n,t,r.paramsDefaults))return""}return{type:l,value:p=a(n,p,r.paramsMutators,s)}}}},function(n,r,t){"use strict";n.exports={createSkinCss:t(3),renderParam:t(1).renderParam}},function(n,r,t){"use strict";var e=t(0),i=t(1),u=t(6),o=t(8);function a(n){return isNaN(n)?n:n+"px"}var c={BORDER_RADIUS:function(n){return"border-radius:"+n+";"},BORDER_SIZES:function(n){return"border-width:"+n+";"},BOX_SHADOW:function(n){return"box-shadow:"+n+";"},FONT:function(n){return"font:"+n},FONT_FAMILY:function(n){return"font-family:"+n+";"},TRANSITION:function(n){return"transition:"+n+";"},INVERTED_ZOOM:function(n){return"zoom:"+n+";"},INVERTED_ZOOM_FIXED:function(n){return"zoom:"+n+";"},ORIENTATION_ZOOM_FIX:function(n){return"zoom:"+n+";"},ZOOM_BY_SCREEN_PROPERTIES:function(n){return"zoom:"+n+";"},DEFAULT:e.identity},f={BORDER_RADIUS:e.identity,BORDER_SIZES:e.identity,TRANSITION:e.identity,ALPHA:e.identity,BORDER_SIDES:e.constant(""),ICON_TYPE:e.constant(""),BOX_SHADOW:a,SIZE:a,FONT:function(n,r){return u.fontToCSSWithoutColor(n,r)},FONT_FAMILY:function(n){return u.getFullFontFamily(n)},COLOR:function(n){return n.hexString()},BG_COLOR:function(n){return n.alpha()>0?n.rgbaString():"transparent"},COLOR_ALPHA:function(n){return n.alpha()>0?n.rgbaString():"transparent"},INVERTED_ZOOM:function(n,r,t){return t.siteZoomRatio},INVERTED_ZOOM_FIXED:function(n,r,t){return t.invertedZoomRatio},ORIENTATION_ZOOM_FIX:function(n,r,t){return t.orientationZoomFix},ZOOM_BY_SCREEN_PROPERTIES:function(n,r,t){return t.mobileZoom},URL:function(n,r,t){return"BASE_THEME_DIRECTORY"===n?t.baseThemeUrl:"WEB_THEME_DIRECTORY"===n?t.webThemeUrl:n},DEFAULT:e.identity};function s(n,r,t,i){var u=i.renderingEnv;return e.isNil(n)?"":(c[r]||c.DEFAULT)((f[r]||f.DEFAULT)(n,t,u))}function l(n,r,t,u,o){var a=i.renderParam(n,r,t,u.color,o.evals),c="SIZE"===a.type&&e.isString(a.value)?e.map(a.value.split(" "),function(n){return{value:n,type:"SIZE"}}):[a];return e.map(c,function(n){return s(n.value,n.type,u,o)})}function p(n,r,t,u,a){return n.$render(function(n){return"."+n}(u),function(n,r,t,u){return e.mapValues(n.params,function(o,a){var c=i.renderParam(a,n,r,t.color,u.evals);return function(n,r,t,i){var u=i.renderingEnv;if(e.isNil(n))return"";return(f[r]||f.DEFAULT)(n,t,u)}(c.value,c.type,t,u)})}(n,r,t,a),o)}function O(n,r,t,u,o){return e.map(n.css,function(a,c){var f="@"===c[0]?u+"_":"."+u;return(c=c.replace(/%/g,f))+" {"+(a=function(n,r){return n.replace(/((-webkit-)?animation(-name)?: ?)/gim,"$1"+r+"_")}(a=function(n,r,t,e,u){return n.replace(/\[(.*?)\]/g,function(n,o){var a=i.renderParam(o,r,t,e.color,u.evals);return s(a.value,a.type,e,u)})}(a=function(n,r,t,i,u){return n.replace(/calc\(\[([\w\d]+)\] ([-+*\/]) \[([\w\d]+)\]\)/g,function(n,o,a,c){for(var f=l(o,r,t,i,u),s=l(c,r,t,i,u),p=e.template("calc(${p1} ${sign} ${p2})"),O=[],_=0;_<Math.max(f.length,s.length);_++)O.push(p({p1:f[_]||f[0],p2:s[_]||s[0],sign:a}));return O.join(" ")})}(a,n,r,t,o),n,r,t,o),u))+"}"}).join("\n")}function _(n,r,t,i){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{evals:{}};return function(n){return"function"==typeof n.$render}(n)?p(n,r,t,i,u):O(n,r,t,i,u)+function(n,r,t,i){return n.mediaQueries&&n.mediaQueries.length?e.map(n.mediaQueries,function(n){var e=_({css:n.css},r,t,i);return[n.query,"{",e,"}"].join("")}).join("\n"):""}(n,r,t,i)}n.exports=_},function(n,t){n.exports=r},function(n,r,t){"use strict";var e=t(0),i=["BORDER_SIZE","BORDER_TOP_SIZE","BORDER_BOTTOM_SIZE","BORDER_LEFT_SIZE","BORDER_RIGHT_SIZE","PADDING_SIZE","PADDING_TOP_SIZE","PADDING_BOTTOM_SIZE","PADDING_LEFT_SIZE","PADDING_RIGHT_SIZE","MARGIN_SIZE","MARGIN_TOP_SIZE","MARGIN_BOTTOM_SIZE","MARGIN_LEFT_SIZE","MARGIN_RIGHT_SIZE","BG_SIZE","WIDTH_SIZE","HEIGHT_SIZE","TOP_SIZE","BOTTOM_SIZE","LEFT_SIZE","RIGHT_SIZE","TEXT_SIZE"],u=["TEXT_COLOR","BORDER_COLOR"],o=["BORDER_COLOR_ALPHA","BOX_SHADOW_COLOR_ALPHA","TEXT_COLOR_LEGACY_ALPHA"],a=["BG_COLOR_ALPHA"],c={};e.forEach(i,function(n){c[n]="SIZE"}),e.forEach(u,function(n){c[n]="COLOR"}),e.forEach(o,function(n){c[n]="COLOR_ALPHA"}),e.forEach(a,function(n){c[n]="BG_COLOR"});n.exports={checkIsParamAnAliasAndGetUnaliasedValue:function(n){return c[n]?c[n]:n},PARAM_ALIAS_MAP:c,SIZE_ALIASES:i,COLOR_ALIASES:u,COLOR_ALPHA_ALIASES:o,BG_COLOR_ALIASES:a}},function(n,r,t){"use strict";var e=t(0),i=t(7).fonts;function u(n){var r=n,t=i.getFontFallback(n);return t&&(r=r+","+t),r=r.replace(/[^,]*[^\w,\d\-][^,]*/g,function(n){return"'"+n.replace(/\+/g," ")+"'"})}n.exports={fontToCSSWithoutColor:function(n,r){return function(n){var r=n;e.includes(r,"#")&&(r=r.slice(0,r.indexOf("#"))),r=r.replace(/\{color_\d+\}/,"");var t=i.getFontFamily(r),o=u(t);return r.replace(t,o)+";"}(function(n,r){if(e.startsWith(n,"font_")){var t=n.split("font_");if(2===t.length)return r.font[t[1]]}return n}(n,r))},getFullFontFamily:u}},function(n,r){n.exports=t},function(n,r,t){"use strict";var e=t(0),i=t(9);n.exports={identity:e.identity,getInnerBorderRadius:i}},function(n,r,t){"use strict";n.exports=function(n,r){var t=+r.replace("px","");if(isNaN(t))return n;function e(n){var r=n-t;return r>0?r:0}var i=[],u=n.split(" "),o=Array.isArray(u),a=0;for(u=o?u:u[Symbol.iterator]();;){var c;if(o){if(a>=u.length)break;c=u[a++]}else{if((a=u.next()).done)break;c=a.value}var f=+c.replace("px","");if(isNaN(f))return n;i.push(e(f)+"px")}return i.join(" ")}}])});
//# sourceMappingURL=skin-utils.js.map